<template name="vote">
  <div class="section vote-section">
    <div class="">
        <div class="section-title">
          <h1>Voting</h1>
        </div>
        <div class="section-body">
          <h2>Select a choice:</h2>
          <form class="vote-on-poll">
            {{#if choices}}
            <div class="form-fields">
              {{#if pollTypeIsFPTP }}
                {{#each choices}}
                <input type="radio" name="choice" value="{{this}}"><label>{{this}}</label><br>
                {{/each}}
              {{/if}}
              {{#if pollTypeIsAPRV }}
                {{#each choices}}
                <input type="checkbox" name="choice" value="{{this}}"><label>{{this}}</label><br>
                {{/each}}
              {{/if}}
              {{#if pollTypeIsAV }}
                {{#each choices}}
                <select name="preference" class="form-control preference-selection">
                  <option value="" disabled selected>---</option>
                  {{#each preferenceNumbers}}
                  <option value="{{this}}">{{this}}</option>
                  {{/each}}
                </select>
                <input type="checkbox" name="choice" value="{{this}}" hidden>
                <label>{{this}}</label><br>
                {{/each}}
              {{/if}}
            </div>
            <button class="btn fv-btn">Submit Vote</button>
            {{/if}}
          </form>
        </div>
    </div>
  </div>
</template>

<template name="viewvotes">
  <div class="section view-votes-section">
    <div class="">
        <div class="section-title">
          <h1>View Votes</h1>
        </div>
        <div class="section-body">
            <h3>Displaying votes for "{{poll.title}}"</h3>
            <h4>Please note that votes recently made will be displayed as soon as the next block has been generated.</h4>
            <h3>Vote count</h3>
            <div class="form-fields">
            {{#each votes}}
              <span>{{choice}}:&nbsp;</span><span>{{numVotes}}</span><br>
            {{/each}}
            </div>
            {{#if pollIsActive }}
            <h4>This poll is active. Votes are still being collected for this poll.</h4>
            {{else}}
              {{#if winner}}
              <h4>This poll has ended. The winner was: {{winner}}</h4>
              {{else}}
              <h4>This poll has ended. There was no clear winner.</h4>
              {{/if}}
            {{/if}}
            {{#if poll.votes}}
              <h3>Vote ledger</h3>
              {{#each poll.votes}}
                {{#if choice}}
                  {{#if preference}}
                  <span>{{sender}} voted for {{choice}} with preference {{preference}}</span><br>
                  {{else}}
                  <span>{{sender}} voted for {{choice}}</span><br>
                  {{/if}}
                {{/if}}
              {{/each}}
            {{/if}}

        </div>
    </div>
  </div>
</template>